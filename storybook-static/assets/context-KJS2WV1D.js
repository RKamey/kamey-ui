import{I as ge,_ as q,n as M,p as pe,e as ee,o as Ae,q as be,s as he,t as J}from"./button-DlTz0Kjj.js";import{r as n,R as $}from"./index-2yJIXLcc.js";import{_ as Ne,a as ue,b as X}from"./UnstableContext-QdemDfQL.js";import{r as _e}from"./index-BLRkw0s3.js";var Le={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z"}}]},name:"check-circle",theme:"filled"},we=function(o,l){return n.createElement(ge,q({},o,{ref:l,icon:Le}))},Ge=n.forwardRef(we),Ie={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm32 664c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V456c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272zm-32-344a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"info-circle",theme:"filled"},Pe=function(o,l){return n.createElement(ge,q({},o,{ref:l,icon:Ie}))},Ue=n.forwardRef(Pe),Me=n.forwardRef(function(e,o){var l=e.prefixCls,s=e.style,u=e.className,h=e.duration,y=h===void 0?4.5:h,A=e.showProgress,w=e.pauseOnHover,b=w===void 0?!0:w,T=e.eventKey,D=e.content,m=e.closable,g=e.closeIcon,I=g===void 0?"x":g,C=e.props,v=e.onClick,j=e.onNoticeClose,H=e.times,E=e.hovering,k=n.useState(!1),x=M(k,2),f=x[0],p=x[1],a=n.useState(0),t=M(a,2),r=t[0],i=t[1],R=n.useState(0),_=M(R,2),S=_[0],G=_[1],d=E||f,L=y>0&&A,O=function(){j(T)},U=function(c){(c.key==="Enter"||c.code==="Enter"||c.keyCode===Ae.ENTER)&&O()};n.useEffect(function(){if(!d&&y>0){var P=Date.now()-S,c=setTimeout(function(){O()},y*1e3-S);return function(){b&&clearTimeout(c),G(Date.now()-P)}}},[y,d,H]),n.useEffect(function(){if(!d&&L&&(b||S===0)){var P=performance.now(),c,N=function ne(){cancelAnimationFrame(c),c=requestAnimationFrame(function(oe){var z=oe+S-P,K=Math.min(z/(y*1e3),1);i(K*100),K<1&&ne()})};return N(),function(){b&&cancelAnimationFrame(c)}}},[y,S,d,L,H]);var Y=n.useMemo(function(){return Ne(m)==="object"&&m!==null?m:m?{closeIcon:I}:{}},[m,I]),te=pe(Y,!0),B=100-(!r||r<0?0:r>100?100:r),F="".concat(l,"-notice");return n.createElement("div",q({},C,{ref:o,className:ee(F,u,ue({},"".concat(F,"-closable"),m)),style:s,onMouseEnter:function(c){var N;p(!0),C==null||(N=C.onMouseEnter)===null||N===void 0||N.call(C,c)},onMouseLeave:function(c){var N;p(!1),C==null||(N=C.onMouseLeave)===null||N===void 0||N.call(C,c)},onClick:v}),n.createElement("div",{className:"".concat(F,"-content")},D),m&&n.createElement("a",q({tabIndex:0,className:"".concat(F,"-close"),onKeyDown:U,"aria-label":"Close"},te,{onClick:function(c){c.preventDefault(),c.stopPropagation(),O()}}),Y.closeIcon),L&&n.createElement("progress",{className:"".concat(F,"-progress"),max:"100",value:B},B+"%"))}),ke=$.createContext({}),Be=function(o){var l=o.children,s=o.classNames;return $.createElement(ke.Provider,{value:{classNames:s}},l)},de=8,me=3,Ce=16,He=function(o){var l={offset:de,threshold:me,gap:Ce};if(o&&Ne(o)==="object"){var s,u,h;l.offset=(s=o.offset)!==null&&s!==void 0?s:de,l.threshold=(u=o.threshold)!==null&&u!==void 0?u:me,l.gap=(h=o.gap)!==null&&h!==void 0?h:Ce}return[!!o,l]},Fe=["className","style","classNames","styles"],De=function(o){var l=o.configList,s=o.placement,u=o.prefixCls,h=o.className,y=o.style,A=o.motion,w=o.onAllNoticeRemoved,b=o.onNoticeClose,T=o.stack,D=n.useContext(ke),m=D.classNames,g=n.useRef({}),I=n.useState(null),C=M(I,2),v=C[0],j=C[1],H=n.useState([]),E=M(H,2),k=E[0],x=E[1],f=l.map(function(d){return{config:d,key:String(d.key)}}),p=He(T),a=M(p,2),t=a[0],r=a[1],i=r.offset,R=r.threshold,_=r.gap,S=t&&(k.length>0||f.length<=R),G=typeof A=="function"?A(s):A;return n.useEffect(function(){t&&k.length>1&&x(function(d){return d.filter(function(L){return f.some(function(O){var U=O.key;return L===U})})})},[k,f,t]),n.useEffect(function(){var d;if(t&&g.current[(d=f[f.length-1])===null||d===void 0?void 0:d.key]){var L;j(g.current[(L=f[f.length-1])===null||L===void 0?void 0:L.key])}},[f,t]),$.createElement(be,q({key:s,className:ee(u,"".concat(u,"-").concat(s),m==null?void 0:m.list,h,ue(ue({},"".concat(u,"-stack"),!!t),"".concat(u,"-stack-expanded"),S)),style:y,keys:f,motionAppear:!0},G,{onAllRemoved:function(){w(s)}}),function(d,L){var O=d.config,U=d.className,Y=d.style,te=d.index,B=O,F=B.key,P=B.times,c=String(F),N=O,ne=N.className,oe=N.style,z=N.classNames,K=N.styles,Se=he(N,Fe),ae=f.findIndex(function(Q){return Q.key===c}),Z={};if(t){var V=f.length-1-(ae>-1?ae:te-1),fe=s==="top"||s==="bottom"?"-50%":"0";if(V>0){var re,ie,ce;Z.height=S?(re=g.current[c])===null||re===void 0?void 0:re.offsetHeight:v==null?void 0:v.offsetHeight;for(var ve=0,se=0;se<V;se++){var le;ve+=((le=g.current[f[f.length-1-se].key])===null||le===void 0?void 0:le.offsetHeight)+_}var Ee=(S?ve:V*i)*(s.startsWith("top")?1:-1),xe=!S&&v!==null&&v!==void 0&&v.offsetWidth&&(ie=g.current[c])!==null&&ie!==void 0&&ie.offsetWidth?((v==null?void 0:v.offsetWidth)-i*2*(V<3?V:3))/((ce=g.current[c])===null||ce===void 0?void 0:ce.offsetWidth):1;Z.transform="translate3d(".concat(fe,", ").concat(Ee,"px, 0) scaleX(").concat(xe,")")}else Z.transform="translate3d(".concat(fe,", 0, 0)")}return $.createElement("div",{ref:L,className:ee("".concat(u,"-notice-wrapper"),U,z==null?void 0:z.wrapper),style:X(X(X({},Y),Z),K==null?void 0:K.wrapper),onMouseEnter:function(){return x(function(W){return W.includes(c)?W:[].concat(J(W),[c])})},onMouseLeave:function(){return x(function(W){return W.filter(function(Re){return Re!==c})})}},$.createElement(Me,q({},Se,{ref:function(W){ae>-1?g.current[c]=W:delete g.current[c]},prefixCls:u,classNames:z,styles:K,className:ee(ne,m==null?void 0:m.notice),style:oe,times:P,key:F,eventKey:F,onNoticeClose:b,hovering:t&&k.length>0})))})},Oe=n.forwardRef(function(e,o){var l=e.prefixCls,s=l===void 0?"rc-notification":l,u=e.container,h=e.motion,y=e.maxCount,A=e.className,w=e.style,b=e.onAllRemoved,T=e.stack,D=e.renderNotifications,m=n.useState([]),g=M(m,2),I=g[0],C=g[1],v=function(t){var r,i=I.find(function(R){return R.key===t});i==null||(r=i.onClose)===null||r===void 0||r.call(i),C(function(R){return R.filter(function(_){return _.key!==t})})};n.useImperativeHandle(o,function(){return{open:function(t){C(function(r){var i=J(r),R=i.findIndex(function(G){return G.key===t.key}),_=X({},t);if(R>=0){var S;_.times=(((S=r[R])===null||S===void 0?void 0:S.times)||0)+1,i[R]=_}else _.times=0,i.push(_);return y>0&&i.length>y&&(i=i.slice(-y)),i})},close:function(t){v(t)},destroy:function(){C([])}}});var j=n.useState({}),H=M(j,2),E=H[0],k=H[1];n.useEffect(function(){var a={};I.forEach(function(t){var r=t.placement,i=r===void 0?"topRight":r;i&&(a[i]=a[i]||[],a[i].push(t))}),Object.keys(E).forEach(function(t){a[t]=a[t]||[]}),k(a)},[I]);var x=function(t){k(function(r){var i=X({},r),R=i[t]||[];return R.length||delete i[t],i})},f=n.useRef(!1);if(n.useEffect(function(){Object.keys(E).length>0?f.current=!0:f.current&&(b==null||b(),f.current=!1)},[E]),!u)return null;var p=Object.keys(E);return _e.createPortal(n.createElement(n.Fragment,null,p.map(function(a){var t=E[a],r=n.createElement(De,{key:a,configList:t,placement:a,prefixCls:s,className:A==null?void 0:A(a),style:w==null?void 0:w(a),motion:h,onNoticeClose:v,onAllNoticeRemoved:x,stack:T});return D?D(r,{prefixCls:s,key:a}):r})),u)}),Te=["getContainer","motion","prefixCls","maxCount","className","style","onAllRemoved","stack","renderNotifications"],je=function(){return document.body},ye=0;function Ke(){for(var e={},o=arguments.length,l=new Array(o),s=0;s<o;s++)l[s]=arguments[s];return l.forEach(function(u){u&&Object.keys(u).forEach(function(h){var y=u[h];y!==void 0&&(e[h]=y)})}),e}function Ve(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=e.getContainer,l=o===void 0?je:o,s=e.motion,u=e.prefixCls,h=e.maxCount,y=e.className,A=e.style,w=e.onAllRemoved,b=e.stack,T=e.renderNotifications,D=he(e,Te),m=n.useState(),g=M(m,2),I=g[0],C=g[1],v=n.useRef(),j=n.createElement(Oe,{container:I,ref:v,prefixCls:u,motion:s,maxCount:h,className:y,style:A,onAllRemoved:w,stack:b,renderNotifications:T}),H=n.useState([]),E=M(H,2),k=E[0],x=E[1],f=n.useMemo(function(){return{open:function(a){var t=Ke(D,a);(t.key===null||t.key===void 0)&&(t.key="rc-notification-".concat(ye),ye+=1),x(function(r){return[].concat(J(r),[{type:"open",config:t}])})},close:function(a){x(function(t){return[].concat(J(t),[{type:"close",key:a}])})},destroy:function(){x(function(a){return[].concat(J(a),[{type:"destroy"}])})}}},[]);return n.useEffect(function(){C(l())}),n.useEffect(function(){if(v.current&&k.length){k.forEach(function(t){switch(t.type){case"open":v.current.open(t.config);break;case"close":v.current.close(t.key);break;case"destroy":v.current.destroy();break}});var p,a;x(function(t){return(p!==t||!a)&&(p=t,a=t.filter(function(r){return!k.includes(r)})),a})}},[k]),[f,j]}const Je=$.createContext({});export{Je as A,Me as N,Ue as R,Ge as a,Be as b,Ve as u};
