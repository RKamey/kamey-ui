import{I as ge,_ as G,t as P,c as ee,v as pe,x as he,f as J,e as Ae}from"./button-BcU_t4K8.js";import{r as n,R as $}from"./index-BCtMShv3.js";import{b as Ne,_ as ue,a as X}from"./UnstableContext-wcpzFRMZ.js";import{r as be}from"./index-BB2o9Pgr.js";import{p as _e,b as Le}from"./useZIndex-EovJQ_IZ.js";var we={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z"}}]},name:"check-circle",theme:"filled"},Ie=function(a,l){return n.createElement(ge,G({},a,{ref:l,icon:we}))},Be=n.forwardRef(Ie),Pe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm32 664c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V456c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272zm-32-344a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"info-circle",theme:"filled"},Me=function(a,l){return n.createElement(ge,G({},a,{ref:l,icon:Pe}))},Ve=n.forwardRef(Me),He=n.forwardRef(function(e,a){var l=e.prefixCls,s=e.style,u=e.className,h=e.duration,y=h===void 0?4.5:h,p=e.showProgress,L=e.pauseOnHover,A=L===void 0?!0:L,T=e.eventKey,F=e.content,m=e.closable,g=e.closeIcon,w=g===void 0?"x":g,C=e.props,v=e.onClick,j=e.onNoticeClose,M=e.times,E=e.hovering,k=n.useState(!1),x=P(k,2),f=x[0],D=x[1],r=n.useState(0),t=P(r,2),o=t[0],i=t[1],R=n.useState(0),b=P(R,2),S=b[0],U=b[1],d=E||f,_=y>0&&p,O=function(){j(T)},q=function(c){(c.key==="Enter"||c.code==="Enter"||c.keyCode===Le.ENTER)&&O()};n.useEffect(function(){if(!d&&y>0){var I=Date.now()-S,c=setTimeout(function(){O()},y*1e3-S);return function(){A&&clearTimeout(c),U(Date.now()-I)}}},[y,d,M]),n.useEffect(function(){if(!d&&_&&(A||S===0)){var I=performance.now(),c,N=function ne(){cancelAnimationFrame(c),c=requestAnimationFrame(function(oe){var z=oe+S-I,K=Math.min(z/(y*1e3),1);i(K*100),K<1&&ne()})};return N(),function(){A&&cancelAnimationFrame(c)}}},[y,S,d,_,M]);var Y=n.useMemo(function(){return Ne(m)==="object"&&m!==null?m:m?{closeIcon:w}:{}},[m,w]),te=_e(Y,!0),B=100-(!o||o<0?0:o>100?100:o),H="".concat(l,"-notice");return n.createElement("div",G({},C,{ref:a,className:ee(H,u,ue({},"".concat(H,"-closable"),m)),style:s,onMouseEnter:function(c){var N;D(!0),C==null||(N=C.onMouseEnter)===null||N===void 0||N.call(C,c)},onMouseLeave:function(c){var N;D(!1),C==null||(N=C.onMouseLeave)===null||N===void 0||N.call(C,c)},onClick:v}),n.createElement("div",{className:"".concat(H,"-content")},F),m&&n.createElement("a",G({tabIndex:0,className:"".concat(H,"-close"),onKeyDown:q,"aria-label":"Close"},te,{onClick:function(c){c.preventDefault(),c.stopPropagation(),O()}}),Y.closeIcon),_&&n.createElement("progress",{className:"".concat(H,"-progress"),max:"100",value:B},B+"%"))}),ke=$.createContext({}),Je=function(a){var l=a.children,s=a.classNames;return $.createElement(ke.Provider,{value:{classNames:s}},l)},de=8,me=3,Ce=16,Fe=function(a){var l={offset:de,threshold:me,gap:Ce};if(a&&Ne(a)==="object"){var s,u,h;l.offset=(s=a.offset)!==null&&s!==void 0?s:de,l.threshold=(u=a.threshold)!==null&&u!==void 0?u:me,l.gap=(h=a.gap)!==null&&h!==void 0?h:Ce}return[!!a,l]},De=["className","style","classNames","styles"],Oe=function(a){var l=a.configList,s=a.placement,u=a.prefixCls,h=a.className,y=a.style,p=a.motion,L=a.onAllNoticeRemoved,A=a.onNoticeClose,T=a.stack,F=n.useContext(ke),m=F.classNames,g=n.useRef({}),w=n.useState(null),C=P(w,2),v=C[0],j=C[1],M=n.useState([]),E=P(M,2),k=E[0],x=E[1],f=l.map(function(d){return{config:d,key:String(d.key)}}),D=Fe(T),r=P(D,2),t=r[0],o=r[1],i=o.offset,R=o.threshold,b=o.gap,S=t&&(k.length>0||f.length<=R),U=typeof p=="function"?p(s):p;return n.useEffect(function(){t&&k.length>1&&x(function(d){return d.filter(function(_){return f.some(function(O){var q=O.key;return _===q})})})},[k,f,t]),n.useEffect(function(){var d;if(t&&g.current[(d=f[f.length-1])===null||d===void 0?void 0:d.key]){var _;j(g.current[(_=f[f.length-1])===null||_===void 0?void 0:_.key])}},[f,t]),$.createElement(pe,G({key:s,className:ee(u,"".concat(u,"-").concat(s),m==null?void 0:m.list,h,ue(ue({},"".concat(u,"-stack"),!!t),"".concat(u,"-stack-expanded"),S)),style:y,keys:f,motionAppear:!0},U,{onAllRemoved:function(){L(s)}}),function(d,_){var O=d.config,q=d.className,Y=d.style,te=d.index,B=O,H=B.key,I=B.times,c=String(H),N=O,ne=N.className,oe=N.style,z=N.classNames,K=N.styles,Se=he(N,De),ae=f.findIndex(function(Q){return Q.key===c}),Z={};if(t){var V=f.length-1-(ae>-1?ae:te-1),fe=s==="top"||s==="bottom"?"-50%":"0";if(V>0){var re,ie,ce;Z.height=S?(re=g.current[c])===null||re===void 0?void 0:re.offsetHeight:v==null?void 0:v.offsetHeight;for(var ve=0,se=0;se<V;se++){var le;ve+=((le=g.current[f[f.length-1-se].key])===null||le===void 0?void 0:le.offsetHeight)+b}var Ee=(S?ve:V*i)*(s.startsWith("top")?1:-1),xe=!S&&v!==null&&v!==void 0&&v.offsetWidth&&(ie=g.current[c])!==null&&ie!==void 0&&ie.offsetWidth?((v==null?void 0:v.offsetWidth)-i*2*(V<3?V:3))/((ce=g.current[c])===null||ce===void 0?void 0:ce.offsetWidth):1;Z.transform="translate3d(".concat(fe,", ").concat(Ee,"px, 0) scaleX(").concat(xe,")")}else Z.transform="translate3d(".concat(fe,", 0, 0)")}return $.createElement("div",{ref:_,className:ee("".concat(u,"-notice-wrapper"),q,z==null?void 0:z.wrapper),style:X(X(X({},Y),Z),K==null?void 0:K.wrapper),onMouseEnter:function(){return x(function(W){return W.includes(c)?W:[].concat(J(W),[c])})},onMouseLeave:function(){return x(function(W){return W.filter(function(Re){return Re!==c})})}},$.createElement(He,G({},Se,{ref:function(W){ae>-1?g.current[c]=W:delete g.current[c]},prefixCls:u,classNames:z,styles:K,className:ee(ne,m==null?void 0:m.notice),style:oe,times:I,key:H,eventKey:H,onNoticeClose:A,hovering:t&&k.length>0})))})},Te=n.forwardRef(function(e,a){var l=e.prefixCls,s=l===void 0?"rc-notification":l,u=e.container,h=e.motion,y=e.maxCount,p=e.className,L=e.style,A=e.onAllRemoved,T=e.stack,F=e.renderNotifications,m=n.useState([]),g=P(m,2),w=g[0],C=g[1],v=function(t){var o,i=w.find(function(R){return R.key===t});i==null||(o=i.onClose)===null||o===void 0||o.call(i),C(function(R){return R.filter(function(b){return b.key!==t})})};n.useImperativeHandle(a,function(){return{open:function(t){C(function(o){var i=J(o),R=i.findIndex(function(U){return U.key===t.key}),b=X({},t);if(R>=0){var S;b.times=(((S=o[R])===null||S===void 0?void 0:S.times)||0)+1,i[R]=b}else b.times=0,i.push(b);return y>0&&i.length>y&&(i=i.slice(-y)),i})},close:function(t){v(t)},destroy:function(){C([])}}});var j=n.useState({}),M=P(j,2),E=M[0],k=M[1];n.useEffect(function(){var r={};w.forEach(function(t){var o=t.placement,i=o===void 0?"topRight":o;i&&(r[i]=r[i]||[],r[i].push(t))}),Object.keys(E).forEach(function(t){r[t]=r[t]||[]}),k(r)},[w]);var x=function(t){k(function(o){var i=X({},o),R=i[t]||[];return R.length||delete i[t],i})},f=n.useRef(!1);if(n.useEffect(function(){Object.keys(E).length>0?f.current=!0:f.current&&(A==null||A(),f.current=!1)},[E]),!u)return null;var D=Object.keys(E);return be.createPortal(n.createElement(n.Fragment,null,D.map(function(r){var t=E[r],o=n.createElement(Oe,{key:r,configList:t,placement:r,prefixCls:s,className:p==null?void 0:p(r),style:L==null?void 0:L(r),motion:h,onNoticeClose:v,onAllNoticeRemoved:x,stack:T});return F?F(o,{prefixCls:s,key:r}):o})),u)}),je=["getContainer","motion","prefixCls","maxCount","className","style","onAllRemoved","stack","renderNotifications"],Ke=function(){return document.body},ye=0;function We(){for(var e={},a=arguments.length,l=new Array(a),s=0;s<a;s++)l[s]=arguments[s];return l.forEach(function(u){u&&Object.keys(u).forEach(function(h){var y=u[h];y!==void 0&&(e[h]=y)})}),e}function Xe(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=e.getContainer,l=a===void 0?Ke:a,s=e.motion,u=e.prefixCls,h=e.maxCount,y=e.className,p=e.style,L=e.onAllRemoved,A=e.stack,T=e.renderNotifications,F=he(e,je),m=n.useState(),g=P(m,2),w=g[0],C=g[1],v=n.useRef(),j=n.createElement(Te,{container:w,ref:v,prefixCls:u,motion:s,maxCount:h,className:y,style:p,onAllRemoved:L,stack:A,renderNotifications:T}),M=n.useState([]),E=P(M,2),k=E[0],x=E[1],f=Ae(function(r){var t=We(F,r);(t.key===null||t.key===void 0)&&(t.key="rc-notification-".concat(ye),ye+=1),x(function(o){return[].concat(J(o),[{type:"open",config:t}])})}),D=n.useMemo(function(){return{open:f,close:function(t){x(function(o){return[].concat(J(o),[{type:"close",key:t}])})},destroy:function(){x(function(t){return[].concat(J(t),[{type:"destroy"}])})}}},[]);return n.useEffect(function(){C(l())}),n.useEffect(function(){if(v.current&&k.length){k.forEach(function(o){switch(o.type){case"open":v.current.open(o.config);break;case"close":v.current.close(o.key);break;case"destroy":v.current.destroy();break}});var r,t;x(function(o){return(r!==o||!t)&&(r=o,t=o.filter(function(i){return!k.includes(i)})),t})}},[k]),[D,j]}const Ye=$.createContext({});export{Ye as A,He as N,Ve as R,Be as a,Je as b,Xe as u};
